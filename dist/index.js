"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("chunk"),e=require("crypto"),r=require("get-random-values"),n=require("uuid"),o=require("md5"),u=require("sharp"),s=require("base64-img"),a=require("fs"),i=require("path"),f=require("moment-timezone");function c(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=c(t),p=c(e),d=c(r),h=c(o),x=c(u),m=c(s),y=c(a),g=c(i),A=c(f);function*M(t,e,r=1){for(let n=t;n<=e;n+=r)yield n}const S=require("./global");function $(t,e,r){if(!t)return"";if(Array.isArray(e)){let n=`${t}`;for(let t=0;t<e.length;t++)n=$(n,e[t],r);return n}return t.split(e).join(r)}function b(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function C(t=16){return p.default.randomBytes(t).toString("hex")}function j(t){try{return!!y.default.existsSync(t)}catch(t){return!1}}function Y(t){const e=1440,r=10080,n=302400,o=3628800;let u=t<0?-1*t:t,s="";if(u>o){const t=Math.floor(u/o);s+=`${t}y `,u-=o*t}if(u>n){const t=Math.floor(u/n);s+=`${t}mo `,u-=n*t}if(u>r){const t=Math.floor(u/r);s+=`${t}se `,u-=r*t}if(u>e){const t=Math.floor(u/e);s+=`${t}d `,u-=e*t}if(u>60){const t=Math.floor(u/60);s+=`${t}h `,u-=60*t}if(u>1){s+=`${Math.floor(u/1)}m`}else if(u>0){const t=60*u;s+=`${Math.floor(t)}seg`}return s}function B(t,e,r){return r?A.default(t).tz(r||"America/Fortaleza").format(e||"YYYY-MM-DD HH:mm:ss"):A.default(t).format(e||"YYYY-MM-DD HH:mm:ss")}function H(t){if(Array.isArray(t))return t.map((t=>H(t)));try{return parseInt(t,16)}catch(t){return 0}}exports.ASCToHex=function(t){const e=[];for(let r=0,n=t.length;r<n;r++){const n=Number(t.charCodeAt(r)).toString(16);e.push(n)}return e.join("")},exports.buffToArray=function(t,e=2){return t?t instanceof Buffer?l.default(t.toString("hex"),e):Array.isArray(t)?t:l.default(t.replace(/ /g,""),e):[]},exports.camelize=function(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,((t,e)=>0===e?t.toLowerCase():t.toUpperCase())).replace(/\s+/g,"")},exports.compareValues=function(t,e="asc"){return function(r,n){if(!(t in r)||!(t in r))return 0;const o="string"==typeof r[t]?r[t].toUpperCase():r[t],u="string"==typeof n[t]?n[t].toUpperCase():n[t];let s=0;return o>u?s=1:o<u&&(s=-1),"desc"===e?-1*s:s}},exports.convertSvgToPng=async function(t,e){try{return await x.default(t).png().toFile(e)}catch(t){return!1}},exports.dateToStrTimeZone=B,exports.defaultForbidenChars="'@#$%¨&*()_+{}?^:><|¹²³£¢¬§ªº°;.,~´`=-",exports.defaultTheme={primary:"#000",secundary:"#0c0",contrast:"#00C",text:"#000",rounded:0},exports.deleteFile=async function(t){try{return j(t)&&await y.default.unlinkSync(t),!0}catch(t){return!1}},exports.diffExpires=function(t,e=Date.now()){const r=A.default(t).diff(A.default(e));return A.default.duration(r).asMinutes()},exports.extName=function(t){return g.default.extname(t)||""},exports.extractHostname=function(t){let e;return e=t.indexOf("//")>-1?t.split("/")[2]:t.split("/")[0],e=e.split(":")[0],e=e.split("?")[0],e},exports.extractOfDateTime=function(t,e,r){const n=B(t,e,r).split(" "),o=n.length>1?n[1]:"00:00:00";return{date:n.length>0?n[0]:"Invalid date",time:o}},exports.fileExists=j,exports.fileHash=function(t,e="md5"){return new Promise(((r,n)=>{try{const n=p.default.createHash(e),o=y.default.ReadStream(t);o.on("data",(t=>{n.update(t)})),o.on("end",(()=>{const t=n.digest("hex");return r(t)}))}catch(t){return n(t)}}))},exports.fileParse=function(t){return g.default.parse(t)||!1},exports.firstWord=function(t){return t?t.trim().split(" ")[0]:""},exports.forceArray=function(t){return Array.isArray(t)?t||[]:[t]},exports.formatBytes=function(t,e=2){if(!t||0===t)return"0 Bytes";const r=t<0?-1*t:t,n=e<0?0:e,o=Math.floor(Math.log(r)/Math.log(1024));return`${parseFloat((r/Math.pow(1024,o)).toFixed(n))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][o]}`},exports.generateIdPass=function(t,e=""){const r=n.v4(),o=JSON.stringify(t);return h.default(`${r}${o}${e}${C()}`)},exports.getInRamdom=function t(e){if(Array.isArray(e))return e[b(0,e.length-1)];if("object"==typeof e){const t=Object.keys(e),r=t[b(0,t.length-1)];if(r in e)return e[r]}if("function"==typeof e)return t(e());const r=(e||"123456789ABCEFGHKMPQRSTXYZ").toString().split("");return r[b(0,r.length-1)]},exports.getRamdomHex=C,exports.getRamdomStr=function(t,e="123456789ABCEFGHKMPQRSTXYZ"){return Array(t).fill("").map((()=>{const t=Math.floor(d.default(new Uint8Array(1))[0]/256*e.length);return e[t]})).join("")},exports.getRandomArbitrary=function(t,e){return Math.random()*(e-t)+t},exports.getRandomInt=b,exports.getUpTime=function(t){const e=A.default().diff(A.default(t,"YYYY-MM-DD HH:mm:ss"));return Y(A.default.duration(e).asMinutes())||0},exports.getValue=function(t,e,r){return void 0===r&&(r=null),t&&t[e]&&t[e]||r},exports.hashMD5=function(t,e){const r=h.default(`${t}`);return e?Buffer.from(l.default(r,2)):r},exports.hashPassword=function(t,e=""){return h.default(`${t}${e}`)},exports.hex2a=function(t){const e=t.toString();let r="";for(let t=0;t<e.length&&"00"!==e.substr(t,2);t+=2)r+=String.fromCharCode(parseInt(e.substr(t,2),16));return r},exports.hexToASC=function(t){try{return t instanceof Buffer?t.toString("utf8"):Array.isArray(t)?Buffer.from(t.join(""),"hex").toString("utf8"):Buffer.from(t,"hex").toString("utf8")}catch(t){return""}},exports.hexToAlphaNumeric=function(t,e){if(!t)return"";let r="";t instanceof Buffer&&(r=t.toString("hex").toUpperCase()),Array.isArray(t)&&(r=t.join("").toUpperCase()),r=l.default(r,2);let n="";for(let t=0;t<r.length;t++){const o=H(r[t]);e?n+=o>=40&&o<=126?String.fromCharCode(o):" ":o>=40&&o<=126&&(n+=String.fromCharCode(o))}return n},exports.hexToInt=H,exports.intToHex=function(t,e,r){const n=t=>t.replace(/^0+/,"");try{const o=Number(t).toString(16).toLocaleUpperCase(),u=o.length%2!=0?o.length+1:o.length;return r?n(o):o.padStart(e||u,"0")}catch(t){const o="00";return r?n(o):o.padStart(e||2,"0")}},exports.intToHex2=function(t){try{const e=Number(t).toString(16).toLocaleUpperCase(),r=e.length%2!=0?e.length+1:e.length;return e.padStart(r,"0")}catch(t){return`0${(0).toString(16)}`.slice(-2).toUpperCase()}},exports.isDefined=function(t){try{return!(null==t)}catch(t){return!1}},exports.isHexReg=function(t){return/[0-9A-Fa-f]{6}/g.test(t)},exports.isMAC=function(t){return!!t&&(!(t.indexOf(":")>=0&&17!==t.length)&&(!(t.indexOf(":")<0&&12!==t.length)&&/^[a-fA-F0-9:]{17}|[a-fA-F0-9]{12}$/g.test(t)))},exports.isMD5=function(t){return/[a-fA-F0-9]{32}/.test(t)},exports.isValidTime=function(t){return/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(t)},exports.lastWord=function(t){return t?t.trim().split(" ").slice(-1).join(" "):""},exports.notNull=function(t,e=!0){return null==t?e:t},exports.objectHasKeys=function(t,e){for(var r=Object.keys(t),n=0;n<r.length;n++)if(!e.includes(r[n]))return!0;return!1},exports.objectWithoutProperties=function(t,e){const r={},n=Object.keys(t);for(let o=0;o<n.length;o++){const u=n[o];e.includes(u)||(r[u]=t[u])}return r},exports.onlyWithProperties=function(t,e=[]){const r={},n=function(t=[]){return Array.isArray(t)?t:[t]}("object"==typeof e?Object.keys(e):e),o=Object.keys(t);for(let e=0;e<o.length;e++){const u=o[e];n.includes(u)&&(r[u]=t[u])}return r},exports.pathJoin=function(...t){return g.default.join(...t)},exports.range=M,exports.rangeArray=function(t,e,r=1){return Array.from(M(t,e,r))},exports.rangedMonth=function(t,e){const r={start:A.default(t).startOf("month"),end:A.default(t).endOf("month")};if("boolean"==typeof e)return e?{start:r.start,end:r.end}:{start:r.toDate(),end:r.toDate()};const n=e||"YYYY-MM-DD HH:mm:ss";return{start:A.default(t).startOf("month").format(n),end:A.default(t).endOf("month").format(n)}},exports.removeAll=function t(e,r="'@#$%¨&*()_+{}?^:><|¹²³£¢¬§ªº°;.,~´`=-",n=""){if(!e)return"";if(Array.isArray(e))return e.map((e=>t(e,r,n)));const o=Array.isArray(r)?r:r.split("");let u=e;for(let t=0;t<o.length;t++)u=$(u,o[t],n);return u},exports.renameFile=function(t,e,r){try{return r&&j(e)&&y.default.unlinkSync(e),y.default.renameSync(t,e),!0}catch(t){return!1}},exports.replaceAll=$,exports.rmFirstChar=function(t){return t.slice(1)},exports.rmLastChar=function(t){return t.slice(0,t.length-1)},exports.round=function(t,e=4){if(!t||t&&0===t)return 0;const r=Math.pow(10,e),n=t*r;return Math.round(n)/r},exports.round2=function(t,e=4){return!t||t&&0===t?0:"string"==typeof t?parseFloat(t).toFixed(e):"number"==typeof t?t.toFixed(e):0},exports.round3=function(t,e=4){return+`${Math.round(`${t}e+${e}`)}e-${e}`},exports.strDateFromTo=function(t,e,r="YYYY-MM-DD HH:mm:ss"){return t?t instanceof Date?A.default(t).format(r):A.default.isMoment(t)?t.format(r):A.default(t,e).format(r):A.default().format(r)},exports.timeRest=Y,exports.titleize=function(t){if(!t)return"";const e=["de","do","da","dos","das","a","o","as","os","e","di"];return t.toLowerCase().trim().split(" ").map((t=>e.indexOf(t)<0?`${t[0].toUpperCase()}${t.slice(1)}`:t)).join(" ")},exports.toBase64Img=function(t){return m.default.base64Sync(t)},exports.toMask=function(t,e){if(!e)return"";const r=`${e}`;let n="";for(let e=0,o=0;e<t.length&&o<r.length;e++)n+="X"===t.charAt(e)?r.charAt(o++):t.charAt(e);return n},exports.tryInteger=function(t){const e=parseInt(t,10);return!!(Number.isInteger(e)||e<=0)&&e},exports.unArray=function(t){return Array.isArray(t)?t.length>0&&t[0]:t},exports.urlEncodeObject=function(t){if("object"!=typeof t||t instanceof Date)return"";const e=[];return Object.keys(t).forEach((r=>S.encodeURI&&e.push(`${r}=${S.encodeURI(t[r])}`))),e.length?e.join("&"):""};
//# sourceMappingURL=index.js.map
